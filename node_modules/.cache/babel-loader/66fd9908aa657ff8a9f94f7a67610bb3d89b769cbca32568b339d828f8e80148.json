{"ast":null,"code":"import _toConsumableArray from\"/Users/williamberggren/Documents/pwa/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/williamberggren/Documents/pwa/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/williamberggren/Documents/pwa/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/williamberggren/Documents/pwa/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from'react';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Camera=function Camera(){var videoRef=useRef(null);var canvasRef=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),images=_useState2[0],setImages=_useState2[1];useEffect(function(){var startVideo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var constraints,stream;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;constraints={video:true};_context.next=4;return navigator.mediaDevices.getUserMedia(constraints);case 4:stream=_context.sent;if(videoRef.current){videoRef.current.srcObject=stream;}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error('Error accessing camera: ',_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function startVideo(){return _ref.apply(this,arguments);};}();if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){startVideo();}else{console.error('getUserMedia not supported in this browser');}return function(){if(videoRef.current&&videoRef.current.srcObject){videoRef.current.srcObject.getTracks().forEach(function(track){return track.stop();});}};},[]);var captureImage=function captureImage(){if(videoRef.current){var canvas=canvasRef.current;canvas.width=videoRef.current.videoWidth;canvas.height=videoRef.current.videoHeight;canvas.getContext('2d').drawImage(videoRef.current,0,0,canvas.width,canvas.height);var imageSrc=canvas.toDataURL('image/jpeg');setImages([].concat(_toConsumableArray(images),[imageSrc]));// Add the new image to the state\nlocalStorage.setItem('images',JSON.stringify([].concat(_toConsumableArray(images),[imageSrc])));// Save the new image to local storage\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"Camera\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,playsInline:true}),/*#__PURE__*/_jsx(\"button\",{onClick:captureImage,children:\"Capture Image\"}),/*#__PURE__*/_jsx(Link,{to:\"/gallery\",children:/*#__PURE__*/_jsx(\"button\",{children:\"View Gallery\"})}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{display:'none'}})]});};export default Camera;","map":{"version":3,"names":["React","useState","useRef","useEffect","Link","jsx","_jsx","jsxs","_jsxs","Camera","videoRef","canvasRef","_useState","_useState2","_slicedToArray","images","setImages","startVideo","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","constraints","stream","wrap","_callee$","_context","prev","next","video","navigator","mediaDevices","getUserMedia","sent","current","srcObject","t0","console","error","stop","apply","arguments","getTracks","forEach","track","captureImage","canvas","width","videoWidth","height","videoHeight","getContext","drawImage","imageSrc","toDataURL","concat","_toConsumableArray","localStorage","setItem","JSON","stringify","className","children","ref","autoPlay","playsInline","onClick","to","style","display"],"sources":["/Users/williamberggren/Documents/pwa/src/components/Camera.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nconst Camera = () => {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [images, setImages] = useState([]);\n\n  useEffect(() => {\n    const startVideo = async () => {\n      try {\n        const constraints = { video: true };\n        const stream = await navigator.mediaDevices.getUserMedia(constraints);\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      } catch (err) {\n        console.error('Error accessing camera: ', err);\n      }\n    };\n\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      startVideo();\n    } else {\n      console.error('getUserMedia not supported in this browser');\n    }\n\n    return () => {\n      if (videoRef.current && videoRef.current.srcObject) {\n        videoRef.current.srcObject.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, []);\n\n  const captureImage = () => {\n    if (videoRef.current) {\n      const canvas = canvasRef.current;\n      canvas.width = videoRef.current.videoWidth;\n      canvas.height = videoRef.current.videoHeight;\n      canvas.getContext('2d').drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n      const imageSrc = canvas.toDataURL('image/jpeg');\n      setImages([...images, imageSrc]); // Add the new image to the state\n      localStorage.setItem('images', JSON.stringify([...images, imageSrc])); // Save the new image to local storage\n    }\n  };\n\n  return (\n    <div className=\"Camera\">\n      <video ref={videoRef} autoPlay playsInline />\n      <button onClick={captureImage}>Capture Image</button>\n      <Link to=\"/gallery\">\n        <button>View Gallery</button>\n      </Link>\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\n    </div>\n  );\n};\n\nexport default Camera;\n"],"mappings":"ggBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExC,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnB,GAAM,CAAAC,QAAQ,CAAGR,MAAM,CAAC,IAAI,CAAC,CAC7B,GAAM,CAAAS,SAAS,CAAGT,MAAM,CAAC,IAAI,CAAC,CAC9B,IAAAU,SAAA,CAA4BX,QAAQ,CAAC,EAAE,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IAExBV,SAAS,CAAC,UAAM,CACd,GAAM,CAAAc,UAAU,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,WAAA,CAAAC,MAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAETL,WAAW,CAAG,CAAEO,KAAK,CAAE,IAAK,CAAC,CAAAH,QAAA,CAAAE,IAAA,SACd,CAAAE,SAAS,CAACC,YAAY,CAACC,YAAY,CAACV,WAAW,CAAC,QAA/DC,MAAM,CAAAG,QAAA,CAAAO,IAAA,CACZ,GAAIxB,QAAQ,CAACyB,OAAO,CAAE,CACpBzB,QAAQ,CAACyB,OAAO,CAACC,SAAS,CAAGZ,MAAM,CACrC,CAACG,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAU,EAAA,CAAAV,QAAA,aAEDW,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAAZ,QAAA,CAAAU,EAAK,CAAC,CAAC,yBAAAV,QAAA,CAAAa,IAAA,MAAAlB,OAAA,gBAElD,kBAVK,CAAAL,UAAUA,CAAA,SAAAC,IAAA,CAAAuB,KAAA,MAAAC,SAAA,OAUf,CAED,GAAIX,SAAS,CAACC,YAAY,EAAID,SAAS,CAACC,YAAY,CAACC,YAAY,CAAE,CACjEhB,UAAU,CAAC,CAAC,CACd,CAAC,IAAM,CACLqB,OAAO,CAACC,KAAK,CAAC,4CAA4C,CAAC,CAC7D,CAEA,MAAO,WAAM,CACX,GAAI7B,QAAQ,CAACyB,OAAO,EAAIzB,QAAQ,CAACyB,OAAO,CAACC,SAAS,CAAE,CAClD1B,QAAQ,CAACyB,OAAO,CAACC,SAAS,CAACO,SAAS,CAAC,CAAC,CAACC,OAAO,CAAC,SAAAC,KAAK,QAAI,CAAAA,KAAK,CAACL,IAAI,CAAC,CAAC,GAAC,CACvE,CACF,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAM,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzB,GAAIpC,QAAQ,CAACyB,OAAO,CAAE,CACpB,GAAM,CAAAY,MAAM,CAAGpC,SAAS,CAACwB,OAAO,CAChCY,MAAM,CAACC,KAAK,CAAGtC,QAAQ,CAACyB,OAAO,CAACc,UAAU,CAC1CF,MAAM,CAACG,MAAM,CAAGxC,QAAQ,CAACyB,OAAO,CAACgB,WAAW,CAC5CJ,MAAM,CAACK,UAAU,CAAC,IAAI,CAAC,CAACC,SAAS,CAAC3C,QAAQ,CAACyB,OAAO,CAAE,CAAC,CAAE,CAAC,CAAEY,MAAM,CAACC,KAAK,CAAED,MAAM,CAACG,MAAM,CAAC,CACtF,GAAM,CAAAI,QAAQ,CAAGP,MAAM,CAACQ,SAAS,CAAC,YAAY,CAAC,CAC/CvC,SAAS,IAAAwC,MAAA,CAAAC,kBAAA,CAAK1C,MAAM,GAAEuC,QAAQ,EAAC,CAAC,CAAE;AAClCI,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAEC,IAAI,CAACC,SAAS,IAAAL,MAAA,CAAAC,kBAAA,CAAK1C,MAAM,GAAEuC,QAAQ,EAAC,CAAC,CAAC,CAAE;AACzE,CACF,CAAC,CAED,mBACE9C,KAAA,QAAKsD,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBzD,IAAA,UAAO0D,GAAG,CAAEtD,QAAS,CAACuD,QAAQ,MAACC,WAAW,MAAE,CAAC,cAC7C5D,IAAA,WAAQ6D,OAAO,CAAErB,YAAa,CAAAiB,QAAA,CAAC,eAAa,CAAQ,CAAC,cACrDzD,IAAA,CAACF,IAAI,EAACgE,EAAE,CAAC,UAAU,CAAAL,QAAA,cACjBzD,IAAA,WAAAyD,QAAA,CAAQ,cAAY,CAAQ,CAAC,CACzB,CAAC,cACPzD,IAAA,WAAQ0D,GAAG,CAAErD,SAAU,CAAC0D,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAE,CAAC,EACnD,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7D,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}